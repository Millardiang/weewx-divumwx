

1. Install Ephem (https://rhodesmill.org/pyephem/). It is important that you install the latest version as versions prior to 4.1.3 are missing crucial libraries in the install package. It is also important that any previous versions are removed before hand. From the command line (if your version of Python is 2.x, use pip2 and python2 instead): -

  sudo pip3 uninstall pyephem
  sudo apt purge python3-ephem
  sudo pip3 install ephem

2. Follow the install process as per the Installation guide

3. Make symbolic links from the following folders in your weather34 folder to your divumwx folder: _

serverdata
jsondata
w34highcharts

sudo ln -s /var/www/html/weewx/weather34/serverdata /var/www/html/weewx/divumwx/serverdata

sudo ln -s /var/www/html/weewx/weather34/jsondata /var/www/html/weewx/divumwx/jsondata

sudo ln -s /var/www/html/weewx/weather34/w34highcharts /var/www/html/weewx/divumwx/w34highcharts

4. When you open the web page for the first time a new userSettings.php file is created. Please do not use your old one as there are additional variables included. Other variables have been removed. You will have to manually edit the userSettings.php for your location information and time zone etc as I have not updated the settings page to incorporate the changes as Stephen is going to be writing a whole new administration section.

7. You will also need to edit the file dvmGetMoon.php to add your latitude and longitude and whether you are East or West of the meridian and North or South of the equator.

5. Add this stanza to your weewx.conf file (you may have to edit the path to suit your own setup): -


    [[DivumWXReport]]
        skin = DivumWX
        HTML_ROOT = /var/www/html/weewx/divumwx/
        [[[Units]]]
            [[[[Groups]]]]
                group_altitude = meter
                group_degree_day = degree_C_day
                group_pressure = hPa
                group_rain = mm
                group_rainrate = mm_per_hour
                group_speed = meter_per_second
                group_speed2 = meter_per_second2
                group_temperature = degree_C

6. Go to the Weather34WebServices stanza in weewx.conf and add these two lines (you will need to change lat, Lon and alt to match your location): -

    no_url = https://api.met.no/weatherapi/locationforecast/2.0/complete?lat=your-lat&lon=your-long&altitude=you-alt
    no_interval = 1800

 Then at the line that starts services = , add .no onto the end of the string   

7. Restart WeeWX and wait for the next report cycle to finish (normally 5minutes) and refresh your web page.

8. Pray for rain and watch the magic happen when the rain starts