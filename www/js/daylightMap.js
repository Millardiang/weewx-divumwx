(function() {
  var DaylightMap, updateDateTime;

  DaylightMap = (function() {
    class DaylightMap {
      constructor(svg, date, options = {}) {
        if (!((typeof SunCalc !== "undefined" && SunCalc !== null) && (typeof $ !== "undefined" && $ !== null) && (typeof d3 !== "undefined" && d3 !== null))) {
          throw new Error("Unmet dependency (requires d3.js, jQuery, SunCalc)");
        }
        if (!svg) {
          throw new TypeError("DaylightMap must be instantiated with a valid SVG");
        }
        this.options = {
          tickDur: options.tickDur || 400,
          shadowOpacity: options.shadowOpacity || 0.16,
          bgColorLeft: options.bgColorLeft || '#42448A',
          bgColorRight: options.bgColorRight || '#376281',
          lightsColor: options.lightsColor || '#FFBEA0',
          lightsOpacity: options.lightsOpacity || 0.5,
          sunOpacity: options.sunOpacity || 0.11
        };
        this.PRECISION_LAT = 1; // How many latitudinal degrees per point when checking solar position.
        this.PRECISION_LNG = 10; // How may longitudial degrees per sunrise / sunset path point.
        this.MAP_WIDTH = options.width || 1100;
        this.MAP_HEIGHT = this.MAP_WIDTH / 2;
        this.SCALAR_X = this.MAP_WIDTH / 360;
        this.SCALAR_Y = this.MAP_HEIGHT / 180;
        this.PROJECTION_SCALE = this.MAP_WIDTH / 6.25;
        this.WORLD_PATHS_URL = 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/215059/world-110m.json';
        this.CITIES_DATA_URL = 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/215059/cities-200000.json';
        this.svg = svg;
        this.isAnimating = false;
        this.cities = [];
        this.animInterval = null;
        this.currDate = date || new Date();
      }

      colorLuminance(hex, lum = 0) {
        var c, i, rgb;
        c = null;
        i = 0;
        rgb = '#';
        hex = String(hex).replace(/[^0-9a-f]/gi, '');
        if (hex.length < 6) {
          hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
        }
        while (i < 3) {
          c = parseInt(hex.substr(i * 2, 2), 16);
          c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16);
          rgb += ('00' + c).substr(c.length);
          i++;
        }
        return rgb;
      }

      isDaylight(obj) {
        return obj.altitude > 0;
      }

      isNorthSun() {
        return this.isDaylight(SunCalc.getPosition(this.currDate, 90, 0));
      }

      getSunriseSunsetLatitude(lng, northSun) {
        var delta, endLat, lat, startLat;
        if (northSun) {
          startLat = -90;
          endLat = 90;
          delta = this.PRECISION_LAT;
        } else {
          startLat = 90;
          endLat = -90;
          delta = -this.PRECISION_LAT;
        }
        lat = startLat;
        while (lat !== endLat) {
          if (this.isDaylight(SunCalc.getPosition(this.currDate, lat, lng))) {
            return lat;
          }
          lat += delta;
        }
        return lat;
      }

      getAllSunPositionsAtLng(lng) {
        var alt, lat, peak, result;
        lat = -90;
        peak = 0;
        result = [];
        while (lat < 90) {
          alt = SunCalc.getPosition(this.currDate, lat, lng).altitude;
          if (alt > peak) {
            peak = alt;
            result = [peak, lat];
          }
          lat += this.PRECISION_LNG;
        }
        return result;
      }

      getSunPosition() {
        var alt, coords, lng, peak, result;
        lng = -180;
        coords = [];
        peak = 0;
        while (lng < 180) {
          alt = this.getAllSunPositionsAtLng(lng);
          if (alt[0] > peak) {
            peak = alt[0];
            result = [alt[1], lng];
          }
          lng += this.PRECISION_LAT;
        }
        return this.coordToXY(result);
      }

      getAllSunriseSunsetCoords(northSun) {
        var coords, lng;
        lng = -180;
        coords = [];
        while (lng < 180) {
          coords.push([this.getSunriseSunsetLatitude(lng, northSun), lng]);
          lng += this.PRECISION_LNG;
        }
        // Add the last point to the map.
        coords.push([this.getSunriseSunsetLatitude(180, northSun), 180]);
        return coords;
      }

      coordToXY(coord) {
        var x, y;
        x = (coord[1] + 180) * this.SCALAR_X;
        y = this.MAP_HEIGHT - (coord[0] + 90) * this.SCALAR_Y;
        return {
          x: x,
          y: y
        };
      }

      getCityOpacity(coord) {
        if (SunCalc.getPosition(this.currDate, coord[0], coord[1]).altitude > 0) {
          return 0;
        }
        return 1;
      }

      getCityRadius(population) {
        if (population < 200000) {
          return 0.3;
        } else if (population < 500000) {
          return 0.4;
        } else if (population < 100000) {
          return 0.5;
        } else if (population < 2000000) {
          return 0.6;
        } else if (population < 4000000) {
          return 0.8;
        } else {
          return 1;
        }
      }

      getPath(northSun) {
        var coords, path;
        path = [];
        coords = this.getAllSunriseSunsetCoords(northSun);
        coords.forEach((val) => {
          return path.push(this.coordToXY(val));
        });
        return path;
      }

      getPathString(northSun) {
        var path, pathStr, yStart;
        if (!northSun) {
          yStart = 0;
        } else {
          yStart = this.MAP_HEIGHT;
        }
        pathStr = `M 0 ${yStart}`;
        path = this.getPath(northSun);
        pathStr += this.lineFunction(path);
        // Close the path back to the origin.
        pathStr += ` L ${this.MAP_WIDTH}, ${yStart} `;
        pathStr += ` L 0, ${yStart} `;
        return pathStr;
      }

      createDefs() {
        d3.select(this.svg).append('defs').append('linearGradient').attr('id', 'gradient').attr('x1', '0%').attr('y1', '0%').attr('x2', '100%').attr('y2', '0%');
        d3.select('#gradient').append('stop').attr('offset', '0%').attr('stop-color', this.options.bgColorLeft);
        d3.select('#gradient').append('stop').attr('offset', '100%').attr('stop-color', this.options.bgColorRight);
        d3.select(this.svg).select('defs').append('linearGradient').attr('id', 'landGradient').attr('x1', '0%').attr('y1', '0%').attr('x2', '100%').attr('y2', '0%');
        d3.select('#landGradient').append('stop').attr('offset', '0%').attr('stop-color', this.colorLuminance(this.options.bgColorLeft, -0.2));
        d3.select('#landGradient').append('stop').attr('offset', '100%').attr('stop-color', this.colorLuminance(this.options.bgColorRight, -0.2));
        d3.select(this.svg).select('defs').append('radialGradient').attr('id', 'radialGradient');
        d3.select('#radialGradient').append('stop').attr('offset', '0%').attr('stop-opacity', this.options.sunOpacity).attr('stop-color', "rgb(255, 255, 255)");
        return d3.select('#radialGradient').append('stop').attr('offset', '100%').attr('stop-opacity', 0).attr('stop-color', 'rgb(255, 255, 255)');
      }

      drawSVG() {
        return d3.select(this.svg).attr('width', this.MAP_WIDTH).attr('height', this.MAP_HEIGHT).attr('viewBox', `0 0 ${this.MAP_WIDTH} ${this.MAP_HEIGHT}`).append('rect').attr('width', this.MAP_WIDTH).attr('height', this.MAP_HEIGHT).attr('fill', "url(#gradient)");
      }

      drawSun() {
        var xy;
        xy = this.getSunPosition();
        return d3.select(this.svg).append('circle').attr('cx', xy.x).attr('cy', xy.y).attr('id', 'sun').attr('r', 150).attr('opacity', 1).attr('fill', 'url(#radialGradient)');
      }

      drawPath() {
        var path;
        path = this.getPathString(this.isNorthSun());
        return d3.select(this.svg).append('path').attr('id', 'nightPath').attr('fill', "rgb(0,0,0)").attr('fill-opacity', this.options.shadowOpacity).attr('d', path);
      }

      drawLand() {
        return $.get(this.WORLD_PATHS_URL, (data) => {
          var projection, worldPath;
          projection = d3.geo.equirectangular().scale(this.PROJECTION_SCALE).translate([this.MAP_WIDTH / 2, this.MAP_HEIGHT / 2]).precision(0.1);
          worldPath = d3.geo.path().projection(projection);
          d3.select(this.svg).append('path').attr('id', 'land').attr('fill', 'url(#landGradient)').datum(topojson.feature(data, data.objects.land)).attr('d', worldPath);
          // Asynchronous so re-order the elements here.
          return this.shuffleElements();
        });
      }

      drawCities() {
        return $.get(this.CITIES_DATA_URL, (data) => {
          return data.forEach((val, i) => {
            var coords, id, opacity, radius, xy;
            coords = [parseFloat(val[2]), parseFloat(val[3])];
            xy = this.coordToXY(coords);
            id = `city${i}`;
            opacity = this.getCityOpacity(coords);
            radius = this.getCityRadius(val[0]);
            d3.select(this.svg).append('circle').attr('cx', xy.x).attr('cy', xy.y).attr('id', id).attr('r', radius).attr('opacity', opacity * this.options.lightsOpacity).attr('fill', this.options.lightsColor);
            return this.cities.push({
              title: val[1],
              country: val[5],
              latlng: coords,
              xy: xy,
              population: parseInt(val[0]),
              id: id,
              opacity: opacity
            });
          });
        });
      }

      searchCities(str) {
        var cities;
        cities = _.filter(this.cities, function(val) {
          return val.title.toLowerCase().indexOf(str) === 0;
        });
        cities = _.sortBy(cities, function(val) {
          return val.population;
        });
        return cities.reverse();
      }

      redrawSun(animate) {
        var curX, xy;
        xy = this.getSunPosition();
        curX = parseInt(d3.select("#sun").attr('cx'));
        if (animate && ((Math.abs(xy.x - curX)) < (this.MAP_WIDTH * 0.8))) {
          return d3.select("#sun").transition().duration(this.options.tickDur).ease('linear').attr('cx', xy.x).attr('cy', xy.y);
        } else {
          return d3.select("#sun").attr('cx', xy.x).attr('cy', xy.y);
        }
      }

      redrawCities() {
        var k;
        k = 0;
        return this.cities.forEach((val, i) => {
          var opacity;
          opacity = this.getCityOpacity(val.latlng);
          if (val.opacity !== opacity) {
            this.cities[i].opacity = opacity;
            k++;
            return d3.select(`#${val.id}`).transition().duration(this.options.tickDur * 2).attr('opacity', this.options.lightsOpacity * opacity);
          }
        });
      }

      redrawPath(animate) {
        var nightPath, path;
        path = this.getPathString(this.isNorthSun(this.currDate));
        nightPath = d3.select('#nightPath');
        if (animate) {
          return nightPath.transition().duration(this.options.tickDur).ease('linear').attr('d', path);
        } else {
          return nightPath.attr('d', path);
        }
      }

      redrawAll(increment = 15, animate = true) {
        this.currDate.setMinutes(this.currDate.getMinutes() + increment);
        this.redrawPath(animate);
        this.redrawSun(animate);
        return this.redrawCities();
      }

      drawAll() {
        this.drawSVG();
        this.createDefs();
        this.drawLand();
        this.drawPath();
        this.drawSun();
        return this.drawCities();
      }

      shuffleElements() {
        $('#land').insertBefore('#nightPath');
        return $('#sun').insertBefore('#land');
      }

      animate(increment = 0) {
        if (!this.isAnimating) {
          this.isAnimating = true;
          return this.animInterval = setInterval(() => {
            this.redrawAll(increment);
            return $(document).trigger('update-date-time', this.currDate);
          }, this.options.tickDur);
        }
      }

      stop() {
        this.isAnimating = false;
        return clearInterval(this.animInterval);
      }

      init() {
        this.drawAll();
        return setInterval(() => {
          if (this.isAnimating) {
            return;
          }
          this.redrawAll(1, false);
          return $(document).trigger('update-date-time', this.currDate);
        }, 60000);
      }

    };

    DaylightMap.prototype.lineFunction = d3.svg.line().x(function(d) {
      return d.x;
    }).y(function(d) {
      return d.y;
    }).interpolate('basis');

    return DaylightMap;

  }).call(this);

  updateDateTime = function(date) {
    // tz = date.toString().match(/\(([A-Za-z\s].*)\)/)[1]
    $('.curr-time').find('span').html(moment(date).format("HH:mm"));
    return $('.curr-date').find('span').text(moment(date).format("DD MMM"));
  };

  $(document).ready(function() {
    var map, svg;
    svg = document.getElementById('daylight-map');
    map = new DaylightMap(svg, new Date());
    map.init();
    updateDateTime(map.currDate);
    $(document).on('update-date-time', function(date) {
      return updateDateTime(map.currDate);
    });
    $('.toggle-btn').on('click', function(e) {
      var $el;
      e.preventDefault();
      $el = $(this);
      return $el.toggleClass('active');
    });
    $('.js-skip').on('click', function(e) {
      var $el, animate;
      e.preventDefault();
      $el = $(this);
      animate = false;
      map.stop();
      $('.js-animate').removeClass('animating');
      if ($el.attr('data-animate')) {
        animate = true;
      }
      map.redrawAll(parseInt($(this).attr('data-skip')), animate);
      return updateDateTime(map.currDate);
    });
    return $('.js-animate').on('click', function(e) {
      var $el;
      $el = $(this);
      e.preventDefault();
      if ($el.hasClass('animating')) {
        $el.removeClass('animating');
        return map.stop();
      } else {
        $el.addClass('animating');
        return map.animate(10);
      }
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLFdBQUEsRUFBQTs7RUFBTTtJQUFOLE1BQUEsWUFBQTtNQUNJLFdBQWEsQ0FBQyxHQUFELEVBQU0sSUFBTixFQUFZLFVBQVUsQ0FBQSxDQUF0QixDQUFBO1FBQ1QsTUFBTyxvREFBQSxJQUFhLHdDQUFiLElBQW9CLDJDQUEzQjtVQUNJLE1BQU0sSUFBSSxLQUFKLENBQVUsb0RBQVYsRUFEVjs7UUFFQSxLQUFPLEdBQVA7VUFDSSxNQUFNLElBQUksU0FBSixDQUFjLG1EQUFkLEVBRFY7O1FBR0EsSUFBQyxDQUFBLE9BQUQsR0FDSTtVQUFBLE9BQUEsRUFBUyxPQUFPLENBQUMsT0FBUixJQUFtQixHQUE1QjtVQUNBLGFBQUEsRUFBZSxPQUFPLENBQUMsYUFBUixJQUF5QixJQUR4QztVQUVBLFdBQUEsRUFBYSxPQUFPLENBQUMsV0FBUixJQUF1QixTQUZwQztVQUdBLFlBQUEsRUFBYyxPQUFPLENBQUMsWUFBUixJQUF3QixTQUh0QztVQUlBLFdBQUEsRUFBYSxPQUFPLENBQUMsV0FBUixJQUF1QixTQUpwQztVQUtBLGFBQUEsRUFBZSxPQUFPLENBQUMsYUFBUixJQUF5QixHQUx4QztVQU1BLFVBQUEsRUFBWSxPQUFPLENBQUMsVUFBUixJQUFzQjtRQU5sQztRQVFKLElBQUMsQ0FBQSxhQUFELEdBQWlCLEVBZHpCO1FBZVEsSUFBQyxDQUFBLGFBQUQsR0FBaUIsR0FmekI7UUFnQlEsSUFBQyxDQUFBLFNBQUQsR0FBYSxPQUFPLENBQUMsS0FBUixJQUFpQjtRQUM5QixJQUFDLENBQUEsVUFBRCxHQUFlLElBQUMsQ0FBQSxTQUFELEdBQWE7UUFDNUIsSUFBQyxDQUFBLFFBQUQsR0FBYSxJQUFDLENBQUEsU0FBRCxHQUFhO1FBQzFCLElBQUMsQ0FBQSxRQUFELEdBQWEsSUFBQyxDQUFBLFVBQUQsR0FBYztRQUMzQixJQUFDLENB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QUFoQjtlQUNBLEdBQUcsQ0FBQyxJQUFKLENBQUEsRUFGSjtPQUFBLE1BQUE7UUFJSSxHQUFHLENBQUMsUUFBSixDQUFhLFdBQWI7ZUFDQSxHQUFHLENBQUMsT0FBSixDQUFZLEVBQVosRUFMSjs7SUFIeUIsQ0FBN0I7RUExQmMsQ0FBbEI7QUFwWEEiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBEYXlsaWdodE1hcFxuICAgIGNvbnN0cnVjdG9yOiAoc3ZnLCBkYXRlLCBvcHRpb25zID0ge30pIC0+XG4gICAgICAgIHVubGVzcyBTdW5DYWxjPyBhbmQgJD8gYW5kIGQzP1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwiVW5tZXQgZGVwZW5kZW5jeSAocmVxdWlyZXMgZDMuanMsIGpRdWVyeSwgU3VuQ2FsYylcIlxuICAgICAgICB1bmxlc3Mgc3ZnXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yIFwiRGF5bGlnaHRNYXAgbXVzdCBiZSBpbnN0YW50aWF0ZWQgd2l0aCBhIHZhbGlkIFNWR1wiXG5cbiAgICAgICAgQG9wdGlvbnMgPVxuICAgICAgICAgICAgdGlja0R1cjogb3B0aW9ucy50aWNrRHVyIHx8IDQwMFxuICAgICAgICAgICAgc2hhZG93T3BhY2l0eTogb3B0aW9ucy5zaGFkb3dPcGFjaXR5IHx8IDAuMTZcbiAgICAgICAgICAgIGJnQ29sb3JMZWZ0OiBvcHRpb25zLmJnQ29sb3JMZWZ0IHx8ICcjNDI0NDhBJ1xuICAgICAgICAgICAgYmdDb2xvclJpZ2h0OiBvcHRpb25zLmJnQ29sb3JSaWdodCB8fCAnIzM3NjI4MSdcbiAgICAgICAgICAgIGxpZ2h0c0NvbG9yOiBvcHRpb25zLmxpZ2h0c0NvbG9yIHx8ICcjRkZCRUEwJ1xuICAgICAgICAgICAgbGlnaHRzT3BhY2l0eTogb3B0aW9ucy5saWdodHNPcGFjaXR5IHx8IDAuNVxuICAgICAgICAgICAgc3VuT3BhY2l0eTogb3B0aW9ucy5zdW5PcGFjaXR5IHx8IDAuMTFcblxuICAgICAgICBAUFJFQ0lTSU9OX0xBVCA9IDEgIyBIb3cgbWFueSBsYXRpdHVkaW5hbCBkZWdyZWVzIHBlciBwb2ludCB3aGVuIGNoZWNraW5nIHNvbGFyIHBvc2l0aW9uLlxuICAgICAgICBAUFJFQ0lTSU9OX0xORyA9IDEwICMgSG93IG1heSBsb25naXR1ZGlhbCBkZWdyZWVzIHBlciBzdW5yaXNlIC8gc3Vuc2V0IHBhdGggcG9pbnQuXG4gICAgICAgIEBNQVBfV0lEVEggPSBvcHRpb25zLndpZHRoIHx8IDExMDBcbiAgICAgICAgQE1BUF9IRUlHSFQgPSAoQE1BUF9XSURUSCAvIDIpXG4gICAgICAgIEBTQ0FMQVJfWCA9IChATUFQX1dJRFRIIC8gMzYwKVxuICAgICAgICBAU0NBTEFSX1kgPSAoQE1BUF9IRUlHSFQgLyAxODApXG4gICAgICAgIEBQUk9KRUNUSU9OX1NDQUxFID0gKEBNQVBfV0lEVEggLyA2LjI1KVxuICAgICAgICBAV09STERfUEFUSFNfVVJMID0gJ2h0dHBzOi8vczMtdXMtd2VzdC0yLmFtYXpvbmF3cy5jb20vcy5jZHBuLmlvLzIxNTA1OS93b3JsZC0xMTBtLmpzb24nXG4gICAgICAgIEBDSVRJRVNfREFUQV9VUkwgPSAnaHR0cHM6Ly9zMy11cy13ZXN0LTIuYW1hem9uYXdzLmNvbS9zLmNkcG4uaW8vMjE1MDU5L2NpdGllcy0yMDAwMDAuanNvbidcblxuICAgICAgICBAc3ZnID0gc3ZnXG4gICAgICAgIEBpc0FuaW1hdGluZyA9IGZhbHNlXG4gICAgICAgIEBjaXRpZXMgPSBbXVxuICAgICAgICBAYW5pbUludGVydmFsID0gbnVsbFxuICAgICAgICBAY3VyckRhdGUgPSBkYXRlIHx8IG5ldyBEYXRlKClcblxuICAgIGNvbG9yTHVtaW5hbmNlOiAoaGV4LCBsdW0gPSAwKSAtPlxuICAgICAgICBjID0gbnVsbFxuICAgICAgICBpID0gMFxuICAgICAgICByZ2IgPSAnIydcbiAgICAgICAgaGV4ID0gU3RyaW5nKGhleCkucmVwbGFjZSgvW14wLTlhLWZdL2dpLCAnJylcbiAgICAgICAgaWYgaGV4Lmxlbmd0aCA8IDZcbiAgICAgICAgICAgIGhleCA9IGhleFswXSArIGhleFswXSArIGhleFsxXSArIGhleFsxXSArIGhleFsyXSArIGhleFsyXVxuICAgICAgICB3aGlsZSBpIDwgM1xuICAgICAgICAgICAgYyA9IHBhcnNlSW50KGhleC5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICAgICAgICAgIGMgPSBNYXRoLnJvdW5kKE1hdGgubWluKE1hdGgubWF4KDAsIGMgKyBjICogbHVtKSwgMjU1KSkudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICByZ2IgKz0gKCcwMCcgKyBjKS5zdWJzdHIoYy5sZW5ndGgpXG4gICAgICAgICAgICBpKytcbiAgICAgICAgcmV0dXJuIHJnYlxuXG4gICAgaXNEYXlsaWdodDogKG9iaikgLT5cbiAgICAgICAgcmV0dXJuIG9iai5hbHRpdHVkZSA+IDBcblxuICAgIGlzTm9ydGhTdW46IC0+XG4gICAgICAgIHJldHVybiBAaXNEYXlsaWdodChTdW5DYWxjLmdldFBvc2l0aW9uKEBjdXJyRGF0ZSwgOTAsIDApKVxuXG4gICAgZ2V0U3VucmlzZVN1bnNldExhdGl0dWRlOiAobG5nLCBub3J0aFN1bikgLT5cbiAgICAgICAgaWYgbm9ydGhTdW5cbiAgICAgICAgICAgIHN0YXJ0TGF0ID0gLTkwXG4gICAgICAgICAgICBlbmRMYXQgPSA5MFxuICAgICAgICAgICAgZGVsdGEgPSBAUFJFQ0lTSU9OX0xBVFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzdGFydExhdCA9IDkwXG4gICAgICAgICAgICBlbmRMYXQgPSAtOTBcbiAgICAgICAgICAgIGRlbHRhID0gLShAUFJFQ0lTSU9OX0xBVClcblxuICAgICAgICBsYXQgPSBzdGFydExhdFxuICAgICAgICB3aGlsZSBsYXQgaXNudCBlbmRMYXRcbiAgICAgICAgICAgIGlmIEBpc0RheWxpZ2h0KFN1bkNhbGMuZ2V0UG9zaXRpb24oQGN1cnJEYXRlLCBsYXQsIGxuZykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdFxuICAgICAgICAgICAgbGF0ICs9IGRlbHRhXG4gICAgICAgIHJldHVybiBsYXRcblxuICAgIGdldEFsbFN1blBvc2l0aW9uc0F0TG5nOiAobG5nKSAtPlxuICAgICAgICBsYXQgPSAtOTBcbiAgICAgICAgcGVhayA9IDBcbiAgICAgICAgcmVzdWx0ID0gW11cbiAgICAgICAgd2hpbGUgbGF0IDwgOTBcbiAgICAgICAgICAgIGFsdCA9IFN1bkNhbGMuZ2V0UG9zaXRpb24oQGN1cnJEYXRlLCBsYXQsIGxuZykuYWx0aXR1ZGVcbiAgICAgICAgICAgIGlmIGFsdCA+IHBlYWtcbiAgICAgICAgICAgICAgICBwZWFrID0gYWx0XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW3BlYWssIGxhdF1cbiAgICAgICAgICAgIGxhdCArPSBAUFJFQ0lTSU9OX0xOR1xuICAgICAgICByZXR1cm4gcmVzdWx0XG5cbiAgICBnZXRTdW5Qb3NpdGlvbjogLT5cbiAgICAgICAgbG5nID0gLTE4MFxuICAgICAgICBjb29yZHMgPSBbXVxuICAgICAgICBwZWFrID0gMFxuICAgICAgICB3aGlsZSBsbmcgPCAxODBcbiAgICAgICAgICAgIGFsdCA9IEBnZXRBbGxTdW5Qb3NpdGlvbnNBdExuZyhsbmcpXG4gICAgICAgICAgICBpZiBhbHRbMF0gPiBwZWFrXG4gICAgICAgICAgICAgICAgcGVhayA9IGFsdFswXVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFthbHRbMV0sIGxuZ11cbiAgICAgICAgICAgIGxuZyArPSBAUFJFQ0lTSU9OX0xBVFxuICAgICAgICByZXR1cm4gQGNvb3JkVG9YWShyZXN1bHQpXG5cbiAgICBnZXRBbGxTdW5yaXNlU3Vuc2V0Q29vcmRzOiAobm9ydGhTdW4pIC0+XG4gICAgICAgIGxuZyA9IC0xODBcbiAgICAgICAgY29vcmRzID0gW11cbiAgICAgICAgd2hpbGUgbG5nIDwgMTgwXG4gICAgICAgICAgICBjb29yZHMucHVzaChbQGdldFN1bnJpc2VTdW5zZXRMYXRpdHVkZShsbmcsIG5vcnRoU3VuKSwgbG5nXSk7XG4gICAgICAgICAgICBsbmcgKz0gQFBSRUNJU0lPTl9MTkdcblxuICAgICAgICAjIEFkZCB0aGUgbGFzdCBwb2ludCB0byB0aGUgbWFwLlxuICAgICAgICBjb29yZHMucHVzaChbQGdldFN1bnJpc2VTdW5zZXRMYXRpdHVkZSgxODAsIG5vcnRoU3VuKSwgMTgwXSlcblxuICAgICAgICByZXR1cm4gY29vcmRzXG5cbiAgICBsaW5lRnVuY3Rpb246IGQzLnN2Zy5saW5lKCkueCgoZCkgLT4gZC54KS55KChkKSAtPiBkLnkgKS5pbnRlcnBvbGF0ZSgnYmFzaXMnKVxuXG4gICAgY29vcmRUb1hZOiAoY29vcmQpIC0+XG4gICAgICAgIHggPSAoY29vcmRbMV0gKyAxODApICogQFNDQUxBUl9YXG4gICAgICAgIHkgPSBATUFQX0hFSUdIVCAtIChjb29yZFswXSArIDkwKSAqIEBTQ0FMQVJfWVxuICAgICAgICByZXR1cm4geyB4OiB4LCB5OiB5IH1cblxuICAgIGdldENpdHlPcGFjaXR5OiAoY29vcmQpIC0+XG4gICAgICAgIGlmIFN1bkNhbGMuZ2V0UG9zaXRpb24oQGN1cnJEYXRlLCBjb29yZFswXSwgY29vcmRbMV0pLmFsdGl0dWRlID4gMFxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgcmV0dXJuIDFcblxuICAgIGdldENpdHlSYWRpdXM6IChwb3B1bGF0aW9uKSAtPlxuICAgICAgICBpZiBwb3B1bGF0aW9uIDwgMjAwMDAwXG4gICAgICAgICAgICByZXR1cm4gMC4zXG4gICAgICAgIGVsc2UgaWYgcG9wdWxhdGlvbiA8IDUwMDAwMFxuICAgICAgICAgICAgcmV0dXJuIDAuNFxuICAgICAgICBlbHNlIGlmIHBvcHVsYXRpb24gPCAxMDAwMDBcbiAgICAgICAgICAgIHJldHVybiAwLjVcbiAgICAgICAgZWxzZSBpZiBwb3B1bGF0aW9uIDwgMjAwMDAwMFxuICAgICAgICAgICAgcmV0dXJuIDAuNlxuICAgICAgICBlbHNlIGlmIHBvcHVsYXRpb24gPCA0MDAwMDAwXG4gICAgICAgICAgICByZXR1cm4gMC44XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAxXG5cbiAgICBnZXRQYXRoOiAobm9ydGhTdW4pIC0+XG4gICAgICAgIHBhdGggPSBbXVxuICAgICAgICBjb29yZHMgPSBAZ2V0QWxsU3VucmlzZVN1bnNldENvb3Jkcyhub3J0aFN1bilcbiAgICAgICAgY29vcmRzLmZvckVhY2ggKHZhbCkgPT5cbiAgICAgICAgICAgIHBhdGgucHVzaChAY29vcmRUb1hZKHZhbCkpXG4gICAgICAgIHJldHVybiBwYXRoXG5cbiAgICBnZXRQYXRoU3RyaW5nOiAobm9ydGhTdW4pIC0+XG4gICAgICAgIHVubGVzcyBub3J0aFN1biB0aGVuIHlTdGFydCA9IDAgZWxzZSB5U3RhcnQgPSBATUFQX0hFSUdIVFxuICAgICAgICBwYXRoU3RyID0gXCJNIDAgI3t5U3RhcnR9XCJcbiAgICAgICAgcGF0aCA9IEBnZXRQYXRoKG5vcnRoU3VuKVxuICAgICAgICBwYXRoU3RyICs9IEBsaW5lRnVuY3Rpb24ocGF0aClcblxuICAgICAgICAjIENsb3NlIHRoZSBwYXRoIGJhY2sgdG8gdGhlIG9yaWdpbi5cbiAgICAgICAgcGF0aFN0ciArPSBcIiBMICN7QE1BUF9XSURUSH0sICN7eVN0YXJ0fSBcIlxuICAgICAgICBwYXRoU3RyICs9IFwiIEwgMCwgI3t5U3RhcnR9IFwiXG4gICAgICAgIHJldHVybiBwYXRoU3RyXG5cbiAgICBjcmVhdGVEZWZzOiAtPlxuICAgICAgICBkMy5zZWxlY3QoQHN2ZylcbiAgICAgICAgICAgIC5hcHBlbmQoJ2RlZnMnKVxuICAgICAgICAgICAgLmFwcGVuZCgnbGluZWFyR3JhZGllbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2dyYWRpZW50JylcbiAgICAgICAgICAgIC5hdHRyKCd4MScsICcwJScpXG4gICAgICAgICAgICAuYXR0cigneTEnLCAnMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3gyJywgJzEwMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3kyJywgJzAlJylcblxuICAgICAgICBkMy5zZWxlY3QoJyNncmFkaWVudCcpXG4gICAgICAgICAgICAuYXBwZW5kKCdzdG9wJylcbiAgICAgICAgICAgIC5hdHRyKCdvZmZzZXQnLCAnMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3N0b3AtY29sb3InLCBAb3B0aW9ucy5iZ0NvbG9yTGVmdClcblxuICAgICAgICBkMy5zZWxlY3QoJyNncmFkaWVudCcpXG4gICAgICAgICAgICAuYXBwZW5kKCdzdG9wJylcbiAgICAgICAgICAgIC5hdHRyKCdvZmZzZXQnLCAnMTAwJScpXG4gICAgICAgICAgICAuYXR0cignc3RvcC1jb2xvcicsIEBvcHRpb25zLmJnQ29sb3JSaWdodClcblxuICAgICAgICBkMy5zZWxlY3QoQHN2ZylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2RlZnMnKVxuICAgICAgICAgICAgLmFwcGVuZCgnbGluZWFyR3JhZGllbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xhbmRHcmFkaWVudCcpXG4gICAgICAgICAgICAuYXR0cigneDEnLCAnMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3kxJywgJzAlJylcbiAgICAgICAgICAgIC5hdHRyKCd4MicsICcxMDAlJylcbiAgICAgICAgICAgIC5hdHRyKCd5MicsICcwJScpXG5cbiAgICAgICAgZDMuc2VsZWN0KCcjbGFuZEdyYWRpZW50JylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N0b3AnKVxuICAgICAgICAgICAgLmF0dHIoJ29mZnNldCcsICcwJScpXG4gICAgICAgICAgICAuYXR0cignc3RvcC1jb2xvcicsIEBjb2xvckx1bWluYW5jZShAb3B0aW9ucy5iZ0NvbG9yTGVmdCwgLTAuMikpXG5cbiAgICAgICAgZDMuc2VsZWN0KCcjbGFuZEdyYWRpZW50JylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N0b3AnKVxuICAgICAgICAgICAgLmF0dHIoJ29mZnNldCcsICcxMDAlJylcbiAgICAgICAgICAgIC5hdHRyKCdzdG9wLWNvbG9yJywgQGNvbG9yTHVtaW5hbmNlKEBvcHRpb25zLmJnQ29sb3JSaWdodCwgLTAuMikpXG5cbiAgICAgICAgZDMuc2VsZWN0KEBzdmcpXG4gICAgICAgICAgICAuc2VsZWN0KCdkZWZzJylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JhZGlhbEdyYWRpZW50JylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdyYWRpYWxHcmFkaWVudCcpXG5cbiAgICAgICAgZDMuc2VsZWN0KCcjcmFkaWFsR3JhZGllbnQnKVxuICAgICAgICAgICAgLmFwcGVuZCgnc3RvcCcpXG4gICAgICAgICAgICAuYXR0cignb2Zmc2V0JywgJzAlJylcbiAgICAgICAgICAgIC5hdHRyKCdzdG9wLW9wYWNpdHknLCBAb3B0aW9ucy5zdW5PcGFjaXR5KVxuICAgICAgICAgICAgLmF0dHIoJ3N0b3AtY29sb3InLCBcInJnYigyNTUsIDI1NSwgMjU1KVwiKVxuXG4gICAgICAgIGQzLnNlbGVjdCgnI3JhZGlhbEdyYWRpZW50JylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N0b3AnKVxuICAgICAgICAgICAgLmF0dHIoJ29mZnNldCcsICcxMDAlJylcbiAgICAgICAgICAgIC5hdHRyKCdzdG9wLW9wYWNpdHknLCAwKVxuICAgICAgICAgICAgLmF0dHIoJ3N0b3AtY29sb3InLCAncmdiKDI1NSwgMjU1LCAyNTUpJylcblxuICAgIGRyYXdTVkc6IC0+XG4gICAgICAgIGQzLnNlbGVjdChAc3ZnKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgQE1BUF9XSURUSClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBATUFQX0hFSUdIVClcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgXCIwIDAgI3tATUFQX1dJRFRIfSAje0BNQVBfSEVJR0hUfVwiKVxuICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCBATUFQX1dJRFRIKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIEBNQVBfSEVJR0hUKVxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBcInVybCgjZ3JhZGllbnQpXCIpXG5cbiAgICBkcmF3U3VuOiAtPlxuICAgICAgICB4eSA9IEBnZXRTdW5Qb3NpdGlvbigpXG4gICAgICAgIGQzLnNlbGVjdChAc3ZnKVxuICAgICAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgIC5hdHRyKCdjeCcsIHh5LngpXG4gICAgICAgICAgICAuYXR0cignY3knLCB4eS55KVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3N1bicpXG4gICAgICAgICAgICAuYXR0cigncicsIDE1MClcbiAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMSlcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3VybCgjcmFkaWFsR3JhZGllbnQpJylcblxuICAgIGRyYXdQYXRoOiAtPlxuICAgICAgICBwYXRoID0gQGdldFBhdGhTdHJpbmcoQGlzTm9ydGhTdW4oKSlcbiAgICAgICAgZDMuc2VsZWN0KEBzdmcpXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICduaWdodFBhdGgnKVxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBcInJnYigwLDAsMClcIilcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsLW9wYWNpdHknLCBAb3B0aW9ucy5zaGFkb3dPcGFjaXR5KVxuICAgICAgICAgICAgLmF0dHIoJ2QnLCBwYXRoKVxuXG4gICAgZHJhd0xhbmQ6IC0+XG4gICAgICAgICQuZ2V0IEBXT1JMRF9QQVRIU19VUkwsIChkYXRhKSA9PlxuICAgICAgICAgICAgcHJvamVjdGlvbiA9IGQzLmdlby5lcXVpcmVjdGFuZ3VsYXIoKVxuICAgICAgICAgICAgICAgIC5zY2FsZShAUFJPSkVDVElPTl9TQ0FMRSlcbiAgICAgICAgICAgICAgICAudHJhbnNsYXRlKFtATUFQX1dJRFRIIC8gMiwgQE1BUF9IRUlHSFQgLzJdKVxuICAgICAgICAgICAgICAgIC5wcmVjaXNpb24oMC4xKVxuXG4gICAgICAgICAgICB3b3JsZFBhdGggPSBkMy5nZW8ucGF0aCgpLnByb2plY3Rpb24ocHJvamVjdGlvbilcblxuICAgICAgICAgICAgZDMuc2VsZWN0KEBzdmcpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xhbmQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3VybCgjbGFuZEdyYWRpZW50KScpXG4gICAgICAgICAgICAgICAgLmRhdHVtKHRvcG9qc29uLmZlYXR1cmUoZGF0YSwgZGF0YS5vYmplY3RzLmxhbmQpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgd29ybGRQYXRoKVxuXG4gICAgICAgICAgICAjIEFzeW5jaHJvbm91cyBzbyByZS1vcmRlciB0aGUgZWxlbWVudHMgaGVyZS5cbiAgICAgICAgICAgIEBzaHVmZmxlRWxlbWVudHMoKVxuXG5cbiAgICBkcmF3Q2l0aWVzOiAtPlxuICAgICAgICAkLmdldCBAQ0lUSUVTX0RBVEFfVVJMLCAgKGRhdGEpID0+XG4gICAgICAgICAgICBkYXRhLmZvckVhY2ggKHZhbCwgaSkgPT5cbiAgICAgICAgICAgICAgICBjb29yZHMgPSBbcGFyc2VGbG9hdCh2YWxbMl0pLCBwYXJzZUZsb2F0KHZhbFszXSldXG4gICAgICAgICAgICAgICAgeHkgPSBAY29vcmRUb1hZKGNvb3JkcylcbiAgICAgICAgICAgICAgICBpZCA9IFwiY2l0eSN7aX1cIlxuICAgICAgICAgICAgICAgIG9wYWNpdHkgPSBAZ2V0Q2l0eU9wYWNpdHkoY29vcmRzKVxuICAgICAgICAgICAgICAgIHJhZGl1cyA9IEBnZXRDaXR5UmFkaXVzKHZhbFswXSlcblxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChAc3ZnKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCB4eS54KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCB4eS55KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBpZClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCByYWRpdXMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5Jywgb3BhY2l0eSAqIEBvcHRpb25zLmxpZ2h0c09wYWNpdHkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgQG9wdGlvbnMubGlnaHRzQ29sb3IpXG5cbiAgICAgICAgICAgICAgICBAY2l0aWVzLnB1c2hcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHZhbFsxXVxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiB2YWxbNV1cbiAgICAgICAgICAgICAgICAgICAgbGF0bG5nOiBjb29yZHNcbiAgICAgICAgICAgICAgICAgICAgeHk6IHh5XG4gICAgICAgICAgICAgICAgICAgIHBvcHVsYXRpb246IHBhcnNlSW50KHZhbFswXSlcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHlcblxuICAgIHNlYXJjaENpdGllczogKHN0cikgLT5cbiAgICAgICAgY2l0aWVzID0gXy5maWx0ZXIoQGNpdGllcywgKHZhbCkgLT4gKHZhbC50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyKSBpcyAwKSlcbiAgICAgICAgY2l0aWVzID0gXy5zb3J0QnkoY2l0aWVzLCAodmFsKSAtPiB2YWwucG9wdWxhdGlvbilcbiAgICAgICAgY2l0aWVzLnJldmVyc2UoKVxuXG4gICAgcmVkcmF3U3VuOiAoYW5pbWF0ZSkgLT5cbiAgICAgICAgeHkgPSBAZ2V0U3VuUG9zaXRpb24oKVxuICAgICAgICBjdXJYID0gcGFyc2VJbnQoZDMuc2VsZWN0KFwiI3N1blwiKS5hdHRyKCdjeCcpKVxuXG4gICAgICAgIGlmIGFuaW1hdGUgYW5kICgoTWF0aC5hYnMoeHkueCAtIGN1clgpKSA8IChATUFQX1dJRFRIICogMC44KSlcblxuICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3N1blwiKVxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAuZHVyYXRpb24oQG9wdGlvbnMudGlja0R1cilcbiAgICAgICAgICAgICAgICAuZWFzZSgnbGluZWFyJylcbiAgICAgICAgICAgICAgICAuYXR0cignY3gnLCB4eS54KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIHh5LnkpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGQzLnNlbGVjdChcIiNzdW5cIilcbiAgICAgICAgICAgICAgICAuYXR0cignY3gnLCB4eS54KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIHh5LnkpXG5cbiAgICByZWRyYXdDaXRpZXM6IC0+XG4gICAgICAgIGsgPSAwXG4gICAgICAgIEBjaXRpZXMuZm9yRWFjaCAodmFsLCBpKSA9PlxuICAgICAgICAgICAgb3BhY2l0eSA9IEBnZXRDaXR5T3BhY2l0eSh2YWwubGF0bG5nKVxuICAgICAgICAgICAgaWYgdmFsLm9wYWNpdHkgaXNudCBvcGFjaXR5XG4gICAgICAgICAgICAgICAgQGNpdGllc1tpXS5vcGFjaXR5ID0gb3BhY2l0eVxuICAgICAgICAgICAgICAgIGsrK1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiMje3ZhbC5pZH1cIilcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oQG9wdGlvbnMudGlja0R1ciAqIDIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgQG9wdGlvbnMubGlnaHRzT3BhY2l0eSAqIG9wYWNpdHkpXG5cbiAgICByZWRyYXdQYXRoOiAoYW5pbWF0ZSkgLT5cbiAgICAgICAgcGF0aCA9IEBnZXRQYXRoU3RyaW5nKEBpc05vcnRoU3VuKEBjdXJyRGF0ZSkpXG4gICAgICAgIG5pZ2h0UGF0aCA9IGQzLnNlbGVjdCgnI25pZ2h0UGF0aCcpXG4gICAgICAgIGlmIGFuaW1hdGVcbiAgICAgICAgICAgIG5pZ2h0UGF0aC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAuZHVyYXRpb24oQG9wdGlvbnMudGlja0R1cilcbiAgICAgICAgICAgICAgICAuZWFzZSgnbGluZWFyJylcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIHBhdGgpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG5pZ2h0UGF0aC5hdHRyKCdkJywgcGF0aClcblxuICAgIHJlZHJhd0FsbDogKGluY3JlbWVudCA9IDE1LCBhbmltYXRlID0gdHJ1ZSkgLT5cbiAgICAgICAgQGN1cnJEYXRlLnNldE1pbnV0ZXMoQGN1cnJEYXRlLmdldE1pbnV0ZXMoKSArIGluY3JlbWVudClcbiAgICAgICAgQHJlZHJhd1BhdGgoYW5pbWF0ZSlcbiAgICAgICAgQHJlZHJhd1N1bihhbmltYXRlKVxuICAgICAgICBAcmVkcmF3Q2l0aWVzKClcblxuICAgIGRyYXdBbGw6IC0+XG4gICAgICAgIEBkcmF3U1ZHKClcbiAgICAgICAgQGNyZWF0ZURlZnMoKVxuICAgICAgICBAZHJhd0xhbmQoKVxuICAgICAgICBAZHJhd1BhdGgoKVxuICAgICAgICBAZHJhd1N1bigpXG4gICAgICAgIEBkcmF3Q2l0aWVzKClcblxuICAgIHNodWZmbGVFbGVtZW50czogLT5cbiAgICAgICAgJCgnI2xhbmQnKS5pbnNlcnRCZWZvcmUoJyNuaWdodFBhdGgnKVxuICAgICAgICAkKCcjc3VuJykuaW5zZXJ0QmVmb3JlKCcjbGFuZCcpXG5cbiAgICBhbmltYXRlOiAoaW5jcmVtZW50ID0gMCkgLT5cbiAgICAgICAgdW5sZXNzIEBpc0FuaW1hdGluZ1xuICAgICAgICAgICAgQGlzQW5pbWF0aW5nID0gdHJ1ZVxuICAgICAgICAgICAgQGFuaW1JbnRlcnZhbCA9IHNldEludGVydmFsID0+XG4gICAgICAgICAgICAgICAgQHJlZHJhd0FsbChpbmNyZW1lbnQpXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcigndXBkYXRlLWRhdGUtdGltZScsIEBjdXJyRGF0ZSlcbiAgICAgICAgICAgICwgQG9wdGlvbnMudGlja0R1clxuXG4gICAgc3RvcDogLT5cbiAgICAgICAgQGlzQW5pbWF0aW5nID0gZmFsc2VcbiAgICAgICAgY2xlYXJJbnRlcnZhbCBAYW5pbUludGVydmFsXG5cbiAgICBpbml0OiAtPlxuICAgICAgICBAZHJhd0FsbCgpXG4gICAgICAgIHNldEludGVydmFsID0+XG4gICAgICAgICAgICByZXR1cm4gaWYgQGlzQW5pbWF0aW5nXG4gICAgICAgICAgICBAcmVkcmF3QWxsKDEsIGZhbHNlKVxuICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcigndXBkYXRlLWRhdGUtdGltZScsIEBjdXJyRGF0ZSlcbiAgICAgICAgLCA2MDAwMFxuXG5cbnVwZGF0ZURhdGVUaW1lID0gKGRhdGUpIC0+XG4gICAgIyB0eiA9IGRhdGUudG9TdHJpbmcoKS5tYXRjaCgvXFwoKFtBLVphLXpcXHNdLiopXFwpLylbMV1cbiAgICAkKCcuY3Vyci10aW1lJykuZmluZCgnc3BhbicpLmh0bWwobW9tZW50KGRhdGUpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICQoJy5jdXJyLWRhdGUnKS5maW5kKCdzcGFuJykudGV4dChtb21lbnQoZGF0ZSkuZm9ybWF0KFwiREQgTU1NXCIpKVxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5IC0+XG4gICAgc3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RheWxpZ2h0LW1hcCcpXG4gICAgbWFwID0gbmV3IERheWxpZ2h0TWFwKHN2ZywgbmV3IERhdGUoKSlcbiAgICBtYXAuaW5pdCgpXG5cbiAgICB1cGRhdGVEYXRlVGltZShtYXAuY3VyckRhdGUpXG5cbiAgICAkKGRvY3VtZW50KS5vbiAndXBkYXRlLWRhdGUtdGltZScsIChkYXRlKSAtPlxuICAgICAgICB1cGRhdGVEYXRlVGltZShtYXAuY3VyckRhdGUpXG5cbiAgICAkKCcudG9nZ2xlLWJ0bicpLm9uICdjbGljaycsIChlKSAtPlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgJGVsID0gJCh0aGlzKVxuICAgICAgICAkZWwudG9nZ2xlQ2xhc3MgJ2FjdGl2ZSdcblxuICAgICQoJy5qcy1za2lwJykub24gJ2NsaWNrJywgKGUpIC0+XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAkZWwgPSAkKHRoaXMpXG4gICAgICAgIGFuaW1hdGUgPSBmYWxzZVxuICAgICAgICBtYXAuc3RvcCgpXG4gICAgICAgICQoJy5qcy1hbmltYXRlJykucmVtb3ZlQ2xhc3MgJ2FuaW1hdGluZydcblxuICAgICAgICBpZiAkZWwuYXR0cignZGF0YS1hbmltYXRlJykgdGhlbiBhbmltYXRlID0gdHJ1ZVxuICAgICAgICBtYXAucmVkcmF3QWxsKHBhcnNlSW50KCQodGhpcykuYXR0cignZGF0YS1za2lwJykpLCBhbmltYXRlKVxuICAgICAgICB1cGRhdGVEYXRlVGltZShtYXAuY3VyckRhdGUpXG5cbiAgICAkKCcuanMtYW5pbWF0ZScpLm9uICdjbGljaycsIChlKSAtPlxuICAgICAgICAkZWwgPSAkKHRoaXMpXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBpZiAkZWwuaGFzQ2xhc3MgJ2FuaW1hdGluZydcbiAgICAgICAgICAgICRlbC5yZW1vdmVDbGFzcyAnYW5pbWF0aW5nJ1xuICAgICAgICAgICAgbWFwLnN0b3AoKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkZWwuYWRkQ2xhc3MgJ2FuaW1hdGluZydcbiAgICAgICAgICAgIG1hcC5hbmltYXRlKDEwKVxuIl19
//# sourceURL=coffeescript